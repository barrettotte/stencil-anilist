import{E as t,r as n,h as a}from"./p-2f13af88.js";const e={dev:{base:"http://127.0.0.1:3000"},prod:{base:"https://graphql.anilist.co"}}[t.apiEnv].base;let s=class{constructor(t){n(this,t),this.useDarkMode=!0,this.hideAnime=!1,this.hideManga=!1}async fetchUser(t){return async function(t){const n=await async function(t,n){try{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n  query($username:String!){\n    User(search: $username){\n      id\n      name\n      statistics{\n        anime{\n          count\n          meanScore\n          episodesWatched\n          minutesWatched\n        }\n        manga{\n          count\n          meanScore\n          chaptersRead\n          volumesRead\n        }\n      }\n      avatar{\n        large\n      }\n    }\n  }\n",variables:n})});return await t.json()}catch(t){return console.error(t),null}}(0,{username:t});if(null===n)return null;const a=n.data.User;return{username:a.name,id:a.id,avatar:a.avatar.large,anime:Object.assign({},a.statistics.anime),manga:Object.assign({},a.statistics.manga)}}(t).then((t=>(this.user=t,t)))}async componentWillRender(){this.username&&await this.fetchUser(this.username)}renderUserUrl(){return a("a",{href:`${e}/user/${this.username}`},a("img",{class:"logo",src:"https://anilist.co/img/icons/icon.svg",alt:"Anilist logo"}),this.username)}renderGenericError(){return a("div",null,a("p",null,"Error occurred fetching Anilist user ",this.renderUserUrl(),"."))}render(){return this.user?a("div",{class:"anilist-container flex-container"},a("div",{class:"user-container flex-container"},a("div",{class:"anilist-item"},a("figure",null,a("img",{src:this.user.avatar,alt:`Avatar for user ${this.username}`}),a("figcaption",null,a("span",null,this.renderUserUrl()))))),a("div",{class:"stats-container flex-container"},a("div",{class:"anilist-item"},a("div",{class:"stat-label"},"Anime Stats"),a("ul",null,a("li",null,"Mean Score",a("span",{class:"stat"},this.user.anime.meanScore)),a("li",null,"Entries",a("span",{class:"stat"},this.user.anime.count)),a("li",null,"Episodes Watched",a("span",{class:"stat"},this.user.anime.episodesWatched)),a("li",null,"Days Watched",a("span",{class:"stat"},(this.user.anime.minutesWatched/60/24).toFixed(2))))),a("div",{class:"anilist-item"},a("div",{class:"stat-label"},"Manga Stats"),a("ul",null,a("li",null,"Mean Score",a("span",{class:"stat"},this.user.manga.meanScore)),a("li",null,"Entries",a("span",{class:"stat"},this.user.manga.count)),a("li",null,"Chapters Read",a("span",{class:"stat"},this.user.manga.chaptersRead)),a("li",null,"Volumes Read",a("span",{class:"stat"},this.user.manga.volumesRead)))))):this.renderGenericError()}};s.style=":host{--color-background-blue-dark:31,35,45;--color-foreground:21,31,46;--color-text-light:114,138,161;--color-orange:218,123,21}:host{font-family:Overpass, -apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;font-size:1.1rem;box-sizing:border-box}.flex-container{display:flex;flex-wrap:wrap;flex-direction:row;align-items:stretch;justify-content:center}.anilist-container{padding:10px;max-width:425px;background:rgb(var(--color-foreground));color:rgb(var(--color-text-light));border-radius:4px}.anilist-item{margin:10px;padding:10px;background:rgb(var(--color-background-blue-dark));border-radius:4px}.anilist-item ul{list-style-type:none;padding:0;margin:0}.anilist-item li{padding-top:4px}.user-container{display:flex;flex-wrap:nowrap;align-items:stretch;justify-content:stretch}.user-container img{border-radius:50%;margin-bottom:25px;max-width:125px;height:auto}.user-container a{color:rgb(var(--color-text-light));text-decoration:none}.user-container a:hover{color:rgb(var(--color-orange))}.user-container a img{max-width:20px;padding-right:8px;float:left}.user-container figcaption{text-align:center;font-size:1.1rem}.stats-container{display:flex;flex-wrap:wrap;flex-direction:column;align-items:stretch;font-size:0.7rem}.stats-container .stat-label{text-align:center;padding:0px 0px 6px 0px;font-weight:bold;text-decoration:underline}.stats-container li{text-align:left}.stats-container li span{float:right}.stats-container li .stat{color:rgb(var(--color-orange));padding-left:12px}";export{s as anilist_user}